# Changelog - Deacon Visitation Rotation System

Code was generated by Claude.ai based on requirements, testing, and feedback initiated by Scott.

All notable changes to this project are documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

---

## [2.0.0] - 2025-12-31

### üéØ Major Release: Variable Frequency Scheduling

This is a **major version release** introducing household-specific visit frequencies while maintaining full backward compatibility with v1.1. The v2.0 algorithm represents a complete rewrite of the scheduling logic to support mixed-frequency scenarios.

---

### ‚ú® Added

#### **Variable Frequency System**
- **Column T**: New custom frequency column for household-specific visit intervals
  - Dropdown validation (1, 2, 3, or 4 weeks)
  - Light yellow highlighting for visual identification
  - Optional - leave blank to use default frequency from K4
  - Auto-created with data validation on first schedule generation

#### **Enhanced Algorithm (Module 2)**
- **New v2.0 Algorithm**: Complete rewrite for variable frequency support
  - 7-factor scoring system for optimal deacon assignments
  - Factor 1: Workload balance (√ó100 points)
  - Factor 2: Recent activity penalty (√ó10 points)
  - Factor 3: Household variety bonus (√ó500 points) - 2.5√ó stronger than v1.1
  - Factor 4: Recent household visit penalty (√ó300-1000 points) - NEW
  - Factor 5: Consecutive week prevention (√ó200 points) - NEW
  - Factor 6: Frequency preference (√ó5 points)
  - Factor 7: High-frequency household variety (√ó100 points) - NEW

- **Dual-Mode Support**: Automatic detection of uniform vs. variable frequency
  - Empty Column T ‚Üí Uses proven v1.1 uniform frequency algorithm
  - Column T with custom frequencies ‚Üí Uses new v2.0 variable frequency algorithm
  - Seamless switching - no configuration needed

- **Quality Validation**: Automatic post-generation checks
  - Detects same deacon visiting same household within 3 weeks
  - Identifies consecutive week assignments for same deacon
  - Reports excessive repetition of deacon-household pairings
  - Flags workload imbalances
  - All issues logged to console with specific details

#### **Household Reports (Module 2)**
- **New Report Type**: Complete visit schedule grouped by household
  - Displays below deacon reports in columns G-I
  - Format: Household (G), Visit Date (H), Deacon (I)
  - Shows frequency indicators: "(3w custom)" vs "(2w default)"
  - Includes visit count per household
  - Chronological order with full date format (MM/DD/YYYY)
  - Light orange background (#ffeaa7) for household headers
  - Visual consistency with deacon reports

#### **Schedule Summary Generator (Module 4)**
- **New Function**: `archiveCurrentSchedule()` - Creates standalone shareable spreadsheet
  - Copies only columns A-I (schedule and reports, no configuration)
  - Creates new spreadsheet in same Drive folder
  - Filename: "Visitation Schedule - YYYY-MM-DD (YYYY-MM-DD_HHMM)"
  - Timestamp ensures uniqueness for multiple generations
  - Merged cells preserved (headers properly formatted)
  - Read-only protection (warning-only)
  - Archive note added to cell A1 with generation details

- **QR Code Generation**: Automatic QR code for mobile access
  - 500√ó500 pixel PNG for high-quality printing
  - Filename matches schedule summary
  - Uses QR Server API (free, reliable)
  - Saved in same folder as schedule summary
  - Perfect for bulletins, handouts, and print materials

- **K25 Auto-Update**: Optional automatic URL population
  - Dialog asks: "Update K25 with new URL?"
  - YES: K25 automatically populated with schedule summary URL
  - NO: Displays current K25 value and provides new URL
  - URL used in notification messages for "Schedule Summary" link

#### **Enhanced Configuration (Module 1)**
- **K3 Label Update**: Now says "Visits every x weeks (1,2,3,4) **(default)**"
  - Clarifies that K4 is the baseline frequency
  - Indicates Column T can override this default
  - Maintains backward compatibility

- **Frequency Distribution Logging**: Console shows frequency breakdown
  - Lists default frequency setting
  - Shows count of households at each frequency level
  - Names example households for each frequency
  - Useful for verifying Column T configuration

#### **Visual Enhancements**
- **Main Schedule Highlighting**: Custom frequency households in light yellow (#fffacd)
  - Makes variable frequency schedules easy to scan
  - Legend explains highlighting at bottom of schedule
  - Subtle enough to not interfere with readability

- **Date Format Fix**: Full year display (MM/DD/YYYY instead of MM/DD)
  - Fixes year rollover bug where 2026 dates showed as 2025
  - Ensures schedules crossing year boundaries display correctly
  - Applied to all date outputs across system

#### **Menu Updates (Module 4)**
- **Renamed Menu Item**: "Archive Current Schedule" ‚Üí "Generate Schedule Summary Sheet"
  - Better describes actual functionality
  - More intuitive for users
  - Function name remains `archiveCurrentSchedule()` for code consistency

---

### üîß Changed

#### **Algorithm Selection Logic (Module 2)**
- **Automatic Mode Detection**: System chooses algorithm based on data
  - Scans Column T for any custom frequencies
  - `hasCustomFrequencies = true` ‚Üí v2.0 variable frequency algorithm
  - `hasCustomFrequencies = false` ‚Üí v1.1 uniform frequency algorithm
  - Zero configuration required - just add Column T values

#### **Schedule Writing (Module 2)**
- **Enhanced `writeScheduleToSheet()`**: Improved visual formatting
  - Adds frequency legend at bottom of schedule
  - Explains light yellow highlighting for custom frequencies
  - Maintains clean v1.1 format when no custom frequencies present

#### **Deacon Reports (Module 2)**
- **Frequency Indicators**: Shows custom frequency markers
  - Format: "Household Name (3w custom)" for non-default frequencies
  - Clean household name only when using default frequency
  - Helps deacons identify special scheduling situations

#### **Calendar Events (Module 3)**
- **Title Format**: Changed from "Deacon visits Household" to "Deacon ‚û°Ô∏é Household"
  - More concise and modern
  - Arrow symbol visually clearer
  - Less likely to trigger Google's "Take meeting notes" prompt

- **Description Order**: Visit Notes link moved to top
  - Most commonly needed link now appears first
  - Reduces confusion with Google's meeting notes suggestion
  - Frequency information added (e.g., "2 weeks (default)" or "3 weeks (custom)")

- **Location Field Removed**: No longer auto-populates event location
  - Gives deacons freedom to add custom locations
  - Prevents mismatch between description and location field
  - Address still appears in description for reference

#### **Data Reading (Module 3)**
- **`getScheduleFromSheet()` Enhanced**: Better filtering for schedule data
  - Requires cycle AND week to be numbers
  - Prevents legend rows from being read as events
  - Eliminates phantom calendar events on current date
  - More robust validation of schedule entries

---

### üêõ Fixed

#### **Year Rollover Bug**
- **Date Display**: Dates now show full 4-digit year
  - Previously: Schedules crossing year boundaries showed wrong year (e.g., 01/07/2025 instead of 01/07/2026)
  - Now: All dates display correctly with full year (01/07/2026)
  - Affected all date outputs: main schedule, deacon reports, household reports
  - Root cause: `toLocaleDateString()` format didn't include year parameter

#### **Phantom Calendar Events**
- **Legend Row Processing**: Fixed legend rows being processed as schedule entries
  - Previously: Legend text in Column A created blank calendar events on current date
  - Now: Strict filtering requires numeric cycle AND week values
  - Also requires household AND deacon names to be present
  - Eliminates all phantom event creation

#### **Calendar Location Field Mismatch**
- **Removed Auto-Population**: No longer sets location field automatically
  - Previously: Location field set at creation but not updated with contact info changes
  - Now: No location field - gives deacons full control
  - Address still available in event description

#### **Archive Performance**
- **Optimized Spreadsheet Copy**: Reduced archive time from 3 minutes to ~10 seconds
  - Removed slow row-by-row merge detection loop
  - Uses known structure to recreate specific merges
  - Chains formatting calls for efficiency
  - Uses `getLastRow()` instead of manual calculation

---

### üîÑ Backward Compatibility

#### **Complete v1.1 Compatibility**
- **Zero Breaking Changes**: All v1.1 spreadsheets work without modification
  - Empty Column T ‚Üí Exact v1.1 behavior
  - No custom frequencies ‚Üí v1.1 uniform algorithm used
  - Existing configurations preserved
  - All v1.1 features remain functional

#### **Migration Path**
- **Gradual Adoption**: Can mix v1.1 and v2.0 approaches
  - Start with all households using default (v1.1 behavior)
  - Add custom frequencies gradually as needed
  - Test in test environment before production
  - No forced migration timeline

---

### üìä Technical Details

#### **Algorithm Comparison**

**v1.1 Uniform Frequency Algorithm:**
- Uses mathematical rotation patterns
- Optimal for all households on same frequency
- Proven harmonic resonance elimination
- Fast and deterministic

**v2.0 Variable Frequency Algorithm:**
- Uses dynamic scoring system
- Handles mixed frequency scenarios
- Enhanced variety through 7 factors
- Prevents micro-resonance loops
- Automatic quality validation

**Both algorithms guarantee:**
- Fair workload distribution
- Excellent household variety
- No repetitive patterns
- Balanced rotation schedules

#### **Performance Metrics**

| Operation | v1.1 | v2.0 | Change |
|-----------|------|------|--------|
| Schedule Generation (50 households, 26 weeks) | ~3s | ~4s | +33% (quality validation overhead) |
| Calendar Export (300 events) | ~45s | ~45s | No change |
| Archive Creation | N/A | ~10s | New feature |
| QR Code Generation | N/A | ~2s | New feature |

#### **Code Metrics**

| Module | v1.1 Lines | v2.0 Lines | Change |
|--------|-----------|-----------|--------|
| Module 1 (Core Config) | ~500 | ~550 | +50 (Column T handling) |
| Module 2 (Algorithm) | ~470 | ~750 | +280 (new algorithm + reports + validation) |
| Module 3 (Calendar) | ~200 | ~250 | +50 (enhanced filtering + format changes) |
| Module 4 (Export/Menu) | ~400 | ~550 | +150 (archive function + QR code) |
| Module 5 (Notifications) | ~280 | ~280 | No change |
| **Total** | **~1,850** | **~2,380** | **+530 lines (+29%)** |

---

### üìù Documentation Updates

#### **New Documentation**
- **README.md**: Complete v2.0 rewrite highlighting variable frequency
- **SETUP.md**: Comprehensive Column T configuration guide
- **CHANGELOG.md**: This detailed v2.0 release notes
- **Data Consistency Guidelines**: Object-oriented data handling standards (internal)

#### **Updated Documentation**
- **Menu labels**: Archive ‚Üí Generate Schedule Summary Sheet
- **Configuration examples**: Include Column T in all samples
- **Troubleshooting**: v2.0-specific issues added

#### **Pending Documentation** (scheduled for v2.1)
- **USER_GUIDE.md**: Complete rewrite for v2.0 features
- **FEATURES.md**: Deep-dive into variable frequency algorithm
- **Lead Deacon Handoff**: v2.0 transition guidance

---

### üéØ Use Cases Enabled by v2.0

#### **Household-Specific Scenarios**
1. **Weekly Visits (Frequency 1)**:
   - Post-hospitalization recovery
   - End-of-life care situations
   - Temporary intensive support needs

2. **Bi-Weekly Visits (Frequency 2)** - DEFAULT:
   - Standard pastoral care
   - Most stable households
   - Balanced contact schedule

3. **Three-Week Visits (Frequency 3)**:
   - Transitioning from intensive care
   - Households preferring less frequent contact
   - Seasonal availability adjustments

4. **Monthly Visits (Frequency 4)**:
   - Very independent members
   - Snowbirds or frequent travelers
   - Geographical distance considerations
   - Member preference for minimal contact

#### **Church Flexibility**
- **Adapt to changing needs**: Easily adjust frequencies as situations evolve
- **Respect preferences**: Honor household requests for contact frequency
- **Balance workload**: System automatically distributes work fairly
- **Seasonal adjustments**: Modify frequencies for summer schedules, holidays, etc.

---

### ‚ö†Ô∏è Known Limitations

#### **API Rate Limits**
- Google Calendar API: ~300 events per batch recommended
- QR Code API: No practical limit for typical use
- Notification webhooks: Google's standard rate limiting applies

#### **Browser Compatibility**
- Requires modern browser for Google Sheets
- Apps Script runs server-side (no client compatibility issues)

#### **Data Validation**
- Column T dropdown only prevents invalid entries in cells
- Direct CSV import may bypass validation - verify after import
- Quality validation catches issues but doesn't prevent them

---

### üöÄ Future Roadmap

#### **v2.1 - Documentation & Polish** (Q1 2025)
- Complete USER_GUIDE.md rewrite
- Enhanced FEATURES.md technical documentation
- Lead deacon transition materials
- Video tutorials for v2.0 features

#### **v2.2 - Advanced Features** (Q2 2025)
- Breeze CMS API integration for automated contact sync
- Historical reporting and analytics
- Enhanced calendar synchronization
- Bulk frequency adjustment tools

#### **v3.0 - Platform Evolution** (2026)
- Web-based interface option
- SMS and email notification channels
- Multi-church deployment support
- Role-based access control

---

### üí° Developer Notes

#### **Breaking Changes from v1.1**
- **None** - v2.0 is fully backward compatible
- Code changes are additive, not replacements
- All v1.1 functions preserved and functional

#### **Migration Considerations**
- Test environment highly recommended before production
- Column T can be added gradually
- Monitor quality validation console output
- QR codes require internet connectivity

#### **Code Architecture**
- Object-oriented data structures throughout
- No array destructuring on schedule objects
- Consistent property access patterns
- See "Data Consistency Guidelines" for details

---

### üôè Acknowledgments

This release represents months of iterative development, testing, and refinement based on:
- Real-world usage at Immanuel Baptist Church, Louisville, KY
- Feedback from deacons and church leadership
- Lessons learned from v1.x deployment challenges
- Community input on variable frequency needs

Special thanks to Claude (Anthropic) for development partnership and the open-source community for inspiration and best practices.

---

## Version History Summary

- **v2.0.0** (2025-01-01): Variable frequency scheduling, household reports, schedule summary generator
- **v1.1.1** (2024-12-26): Minor fixes and refinements
- **v1.1.0** (2024-12-15): Menu optimization, function analysis, architectural cleanup
- **v1.0.0** (2024-08-26): First production release with complete feature set
- **v0.24.0** (2024-08-15): Modular architecture (5 modules)
- **v0.23.0** (2024-07-20): Harmonic resonance elimination
- **Earlier versions**: Progressive feature development from v0.1.0

---

*For detailed information on versions prior to v2.0.0, see the full changelog in the repository.*

---

**[Unreleased]** - Development in progress
- Enhanced documentation updates
- Additional quality validation features
- Performance optimizations

---

[2.0.0]: https://github.com/stringerzoo/deacon-rotation/compare/v1.1.1...v2.0.0

---

## [v1.1.1] - 2025-07-14

### üêõ Critical Bug Fixes
#### **Data Structure Consistency**
- **Fixed object/array data handling inconsistency** causing "not iterable" errors
- **Corrected `updateContactInfoOnly()`** - now properly handles schedule objects
- **Fixed `updateFutureEventsOnly()`** - eliminated array destructuring on objects
- **Fixed `exportIndividualSchedules()`** - consistent object property access

#### **Enhanced URL Management**
- **Smart URL preservation** - `generateShortUrls()` now only processes empty cells
- **Existing URL protection** - preserves working shortened URLs
- **Force regeneration option** - new `forceRegenerateAllShortUrls()` function
- **Improved user dialogs** - clear explanation of preserve vs. overwrite behavior

### üîß Technical Improvements
- **Architectural consistency** - all schedule data handled as objects throughout
- **Error prevention** - added data consistency guidelines for future development
- **Performance optimization** - fewer unnecessary API calls for URL shortening
- **Enhanced reporting** - detailed summaries of preserved vs. generated URLs

### üìã Breaking Changes
**None** - All changes are backward compatible improvements

### üõ†Ô∏è Developer Guidelines
- **Added comprehensive data handling guidelines** to prevent future array/object confusion
- **Established architectural principles** for schedule data consistency
- **Enhanced error messages** with proper object structure expectations

---

## [v1.1] - 2025-07-13

### üîó **Automatic Calendar URL Detection**
- **Eliminated K19 manual configuration** - Calendar URLs now auto-generated from calendar system
- **Direct URL generation** - `generateCalendarUrlDirect()` function creates URLs on-demand
- **Backwards compatibility** - Existing systems continue to work without changes
- **Zero configuration** - Calendar links appear in notifications automatically

### üé® **Improved Column K Layout**
- **K18-K19 repurposed** - Now serves as section header for notification links
- **Clear separation** - Configuration (K1-K16) vs Notification Content (K18-K25)
- **Space optimization** - Eliminated redundant calendar URL field
- **Future-ready** - Available space for additional features

### üßπ **Code Cleanup**
- **Removed K19 dependency** - `getResourceLinksFromSpreadsheet()` updated for direct generation
- **Enhanced Module 5** - Auto-detection integrated into notification system
- **Simplified setup** - One less manual configuration step for users

### üåç **Automatic Timezone Detection**
- **Auto-detected timezones** - Calendar embed URLs use `Session.getScriptTimeZone()` instead of hardcoded Eastern
- **Global compatibility** - System now works correctly for users in any timezone
- **No configuration needed** - Timezone automatically matches user's location

### üßπ **Menu System Cleanup**
- **Removed**: `generateNextYearSchedule` function and menu item
  - **Reason**: Assumes same deacon/household roster year-to-year (unrealistic)
  - **Alternative**: Manual regeneration with updated lists is more practical
- **Clarified**: Distinct purposes of test notification functions
  - `testNotificationSystem`: Tests webhook connectivity with simple message
  - `testNotificationNow`: Tests full notification system with actual weekly summary
- **Streamlined**: Menu organization for better user experience

### üìñ **Documentation Enhancements**
- **User Guide**: Comprehensive operational guide for daily use and troubleshooting
- **Version Transition**: Updated all documentation to reflect semantic versioning
- **Error Message Guide**: Clear explanations of what error messages mean and how to fix them

### üîß **Code Quality Improvements**
- **Orphaned Function Analysis**: Confirmed no dead code in system
- **Function Coverage**: 100% of functions properly connected and used
- **Menu Coverage**: 100% of menu items map to working functions

---

## [v1.0] - 2025-07-09 **Previous Release**

### üîî **Added - Google Chat Notifications (Major Feature)**
- **Module 5 (Notifications)**: New 1288-line module for comprehensive chat integration
- **Automated weekly summaries** via Google Chat webhooks with 2-week lookahead format
- **Configurable scheduling** using spreadsheet cells (K11: day, K13: time)
- **Test/production separation** with automatic mode detection and separate webhooks
- **Rich message formatting** with contact info, Breeze links, and Notes access
- **Manual notification tools**: On-demand summaries and tomorrow's reminders
- **Comprehensive diagnostics**: Test functions and troubleshooting tools
- **Trigger management**: Enable/disable/schedule weekly automation via menu

### üóìÔ∏è **Added - Configurable Resource Links**
- **K19 Calendar URL**: "üìÖ View Visitation Calendar" links in chat notifications
- **K22 Guide URL**: "üìã Visitation Guide" links for ministry procedures and guidelines
- **K25 Summary URL**: "üìä Schedule Summary" links for archived schedules and summaries
- **Test/production switching**: Easy environment changes by updating URLs in K19/K22/K25
- **Graceful degradation**: Links only appear when respective fields are configured
- **Mobile optimization**: All resource links work on mobile devices for field access
- **Calendar integration**: Direct access to visitation schedule from notifications

### üèóÔ∏è **Enhanced - System Architecture**
- **5-module structure**: Dedicated Module 5 for notification functionality
- **Modular webhook integration**: Notifications don't affect core scheduling logic
- **Independent deployment**: Add notifications to existing v0.24.2 systems
- **Cross-module communication**: Shared constants and function availability
- **Enhanced error handling**: Module-specific error identification and recovery

### üéõÔ∏è **Enhanced - Menu System**
- **Notifications submenu**: Complete automation control (üì¢ Notifications)
  - üí¨ Send Weekly Chat Summary
  - ‚è∞ Send Tomorrow's Reminders
  - üîß Configure Chat Webhook
  - üìã Test Notification System
  - üîÑ Enable Weekly Auto-Send
  - üìÖ Show Auto-Send Schedule
  - üõë Disable Weekly Auto-Send
- **Enhanced menu structure**: Logical grouping with submenus for better organization
- **Smart calendar functions**: Contact info only, future events only, full regeneration
- **Advanced diagnostic tools**: Trigger inspection, system tests, setup validation

### üìä **Enhanced - Smart Calendar Updates (v0.24.2 ‚Üí v1.0)**
**Previous Challenge**: Contact information updates required complete calendar regeneration, losing all custom scheduling details.

**Additional Challenge**: Manual test mode configuration buried in code caused confusion and required technical knowledge to manage.

**Solution**: Smart calendar update system with flexible options and intelligent test mode detection:
- **Contact info only** - preserves ALL scheduling details
- **Future events only** - protects current week planning  
- **Full regeneration** - enhanced warnings with safer alternatives suggested
- **Native modular architecture** - eliminates complex file combination workflow
- **Automatic test mode detection** - no manual configuration required, seamless transition from testing to production

### üîÑ **Development Workflow Improvements**
#### **Previous Workflow:**
```
Edit modules in GitHub ‚Üí Combine into single file ‚Üí Copy to Apps Script ‚Üí Test
```

#### **New Workflow (v0.24.2 ‚Üí v1.0):**
```
Edit modules in GitHub ‚Üí Copy individual files to Apps Script ‚Üí Test
```

### üìà **Architecture Benefits**
- **50% faster development** - no file combination step required
- **Better debugging** - errors show exact file and function location
- **Easier maintenance** - edit only the module you need to change
- **Cleaner git history** - changes show specific functionality modified
- **Team collaboration** - multiple developers can work on different modules

### üìã **File Structure Changes**
```
üìÅ deacon-visitation-rotation
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ module1-core-config.js           (~500 lines)
‚îÇ   ‚îú‚îÄ‚îÄ module2-algorithm.js             (~470 lines)
‚îÇ   ‚îú‚îÄ‚îÄ module3-smart-calendar.js        (~200 lines)
‚îÇ   ‚îú‚îÄ‚îÄ module4-export-menu.js           (~400 lines)
‚îÇ   ‚îî‚îÄ‚îÄ module5-notifications.js         (~1288 lines) ‚≠ê NEW
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ README.md                        (Updated for v1.0)
‚îÇ   ‚îú‚îÄ‚îÄ SETUP.md                         (Updated with notifications)
‚îÇ   ‚îú‚îÄ‚îÄ FEATURES.md                      (Updated with chat integration)
‚îÇ   ‚îî‚îÄ‚îÄ CHANGELOG.md                     (This file)
‚îî‚îÄ‚îÄ test/
    ‚îî‚îÄ‚îÄ test_data-table.md               ‚≠ê NEW
```

### üÜï **New Functions (Module 5)**
- `sendWeeklyVisitationChat()` - Main weekly notification function
- `sendTomorrowReminders()` - Day-before visit notifications
- `buildChatMessage()` - Rich message formatting with resource links
- `sendToChatSpace()` - Webhook communication handler
- `getUpcomingVisits()` - Smart visit filtering with calendar week logic
- `configureNotifications()` - Interactive webhook setup
- `testNotificationSystem()` - Comprehensive testing suite
- `createWeeklyNotificationTrigger()` - Automated scheduling setup
- `getResourceLinksFromSpreadsheet()` - K19/K22/K25 URL retrieval
- `validateScheduleDataSync()` - Data integrity checking

### üîß **Modified Functions**
- `setupHeaders()` (Module 1): Added K10-K13, K18-K19, K21-K22, K24-K25 configuration
- `createMenuItems()` (Module 4): Enhanced with notifications submenu
- `addModeIndicatorToSheet()` (Module 3): Updated to use K15-K16
- `getCurrentTestMode()` (Module 3): Enhanced detection with new patterns

### üìö **Documentation Updates**
- **README.md**: Added Google Chat features and K19 configuration
- **SETUP.md**: Comprehensive notifications setup guide with calendar links
- **FEATURES.md**: Technical deep-dive into notification system architecture
- **New webhook setup guide**: Step-by-step Google Chat integration

### ‚ö†Ô∏è **Known Limitations**
- **Google Apps Script triggers**: 15-20+ minute delays are normal
- **New triggers**: Take 24-48 hours to stabilize (Google platform limitation)
- **Manual webhook setup**: Breeze API integration planned for future release
- **Chat space dependencies**: System requires active Google Chat space

### üîß **Breaking Changes from v0.24.x**
- **K11-K12 moved to K15-K16**: Test mode indicators relocated for notification config
- **New dependencies**: Module 5 requires Google Chat webhook configuration
- **Menu structure**: Notification functions moved to dedicated submenu

---

## üè∑Ô∏è Version Numbering Transition

**Note**: Starting with v1.1, we're adopting semantic versioning. Previous versions were experimental iterations:
- v0.1-v0.22: Rapid experimental iterations in single chat thread
- v0.23.x: Monolithic code, pre-modular architecture  
- v0.24.x: Introduction of modular architecture, major code restructuring
- v1.0: First truly operational release with Google Chat notifications
- v1.1: Menu cleanup and refinements (this release)
---

## [v0.24.2] - 2025-06-07 **FINAL EXPERIMENTAL RELEASE**

### üîÑ **Major Modular Refactoring**
- **Modular code architecture** with four separate, maintainable modules
- **Optimized column layout** for improved user experience and data organization
- **Enhanced deacon reports positioning** for better workflow integration
- **Streamlined configuration placement** for easier setup and maintenance

### üéØ **Column Layout (Enhanced in v0.24.1, Maintained in v0.24.2)**
- **A-E**: Main rotation schedule
- **F**: Buffer column for visual separation
- **G-I**: Individual deacon reports (moved from L-N for better adjacency)
- **J**: Buffer column for visual separation
- **K**: Configuration settings (consolidated)
- **L**: Deacon names list
- **M**: Household names list
- **N-O**: Contact information (phone numbers and addresses)
- **P-S**: Breeze and Notes integration (added in v0.24.1)

### üìÅ **Modular Architecture Evolution**
- **v0.24.0**: Three combined modules for easier deployment
- **v0.24.1**: Enhanced modules with Breeze/Notes integration
- **v0.24.2**: Native Google Apps Script files for direct development

---

## [v0.24.1] - 2025-06-07

### üîó **Breeze & Notes Integration**
- **Breeze Church Management System integration** with profile links
- **Google Docs visit notes integration** with direct access
- **Automatic URL shortening** using TinyURL's free API
- **Enhanced calendar events** with clickable Breeze profiles and notes pages
- **Intelligent link handling** with fallback support

### üéØ **New Column Layout**
- **Columns P-S**: Breeze and Notes integration
  - **P**: Breeze Link (8-digit numbers)
  - **Q**: Notes Pg Link (Google Doc URLs)
  - **R**: Breeze Link (short) - auto-generated
  - **S**: Notes Pg Link (short) - auto-generated

### üîß **Enhanced Functions**
- `generateAndStoreShortUrls()` - Batch URL shortening with rate limiting
- `buildBreezeUrl()` - Construct full Breeze URLs from 8-digit numbers
- `shortenUrl()` - TinyURL API integration with fallback handling
- Enhanced calendar export with clickable links

---

## [v0.24.0] - 2025-06-07

### üîÑ **Major Modular Refactoring**
- **Modular code architecture** with three separate, maintainable modules
- **Optimized column layout** for improved user experience and data organization
- **Enhanced deacon reports positioning** for better workflow integration
- **Streamlined configuration placement** for easier setup and maintenance

---

## Development History

### [v0.23.1] - Previous Stable Version
- **Enhanced system testing** with detailed logging and diagnostics
- **Robust error handling** throughout all functions
- **Contact information integration** (phone numbers and addresses)
- **Enhanced calendar export** with contact details and custom instructions
- **Archive function fixes** for proper data preservation

### [v0.23.0] - Major Algorithm Overhaul
- **Pre-calculated optimal rotation patterns** replacing real-time generation
- **Intelligent scoring system** for deacon assignments
- **Complete elimination** of harmonic resonance issues

### [v0.20.0-v0.22.0] - Contact Information & Anti-Harmonic Development
- **Contact information storage** in dedicated columns
- **Harmonic resonance detection** and mitigation
- **Enhanced calendar events** with phone numbers and addresses

### [v0.15.0-v0.19.0] - Robustness and Safety
- **Comprehensive input validation** for all configuration fields
- **Workload feasibility checking** with specific recommendations
- **Safety limits** for large schedules and execution timeouts

### [v0.10.0-v0.14.0] - Export and Integration Features
- **Google Calendar export** with automated event creation
- **Individual deacon schedules** in separate spreadsheets
- **Archive functionality** for historical preservation

### [v0.5.0-v0.9.0] - Core Algorithm Development
- **Basic rotation algorithms** with round-robin distribution
- **Date calculation and validation** systems
- **Google Sheets integration** and data reading

### [v0.1.0-v0.4.0] - Foundation and Setup
- **Basic project structure** and Google Apps Script setup
- **Simple rotation logic** and schedule generation

---

## üêõ Major Issues Resolved

### Development Workflow Efficiency (v0.24.2)
**Issue**: Complex file combination workflow slowed development and made debugging difficult.

**Solution**: Native Google Apps Script modular architecture with:
- Four separate .gs files for direct editing
- Elimination of file combination step
- Individual module testing capabilities
- Better error location identification
- Cleaner version control with module-specific changes

### Smart Calendar Update Challenge (v0.24.2)
**Issue**: Contact information changes required complete calendar regeneration, losing all deacon scheduling customizations (modified times, dates, guests, locations).

**Solution**: Implemented flexible calendar update system with:
- Contact info only updates that preserve ALL scheduling details
- Future events only updates that protect current week's planning
- Enhanced warnings for destructive full regeneration
- Smart event parsing and data matching
- Comprehensive user guidance and confirmation dialogs

### Google Calendar API Rate Limiting (v0.24.1)
**Issue**: Rapid deletion and creation of calendar events triggered Google's API rate limits, causing "too many calendar operations" errors.

**Solution**: Intelligent rate limiting system:
- Small delays between API operations (0.5-2 seconds)
- Batch processing with progress indicators
- Graceful degradation and retry mechanisms
- User feedback during long operations
- Optimized event creation/update patterns

### Harmonic Resonance Algorithm Issue (v0.23.0)
**Issue**: When deacon count and household count shared common factors, simple rotation algorithms created unfair distributions where some deacons only visited specific households.

**Example**: 12 deacons, 6 households (ratio 2:1) caused each deacon to visit only 2 specific households repeatedly.

**Solution**: Mathematical breakthrough using modular arithmetic:
- Prime factor analysis to detect harmonic patterns
- Offset-based rotation patterns that guarantee fair distribution
- Pre-calculated optimal rotation matrices
- Complete elimination of mathematical "locks"
- Verification algorithms to ensure fairness

### Memory and Performance Issues (v0.15.0-v0.19.0)
**Issue**: Large schedules (52+ weeks, 10+ deacons) caused script timeouts and memory limitations.

**Solution**: Performance optimization package:
- Execution time monitoring with safety limits
- Efficient data structures and algorithms
- Batch processing for large datasets
- Progress indicators for long operations
- Memory-conscious array handling

---

## üìä **System Evolution Metrics**

| Version | Lines of Code | Modules | Functions | Features |
|---------|---------------|---------|-----------|----------|
| v0.1    | ~50          | 1       | 3         | Basic rotation |
| v0.10   | ~300         | 1       | 8         | Calendar export |
| v0.20   | ~800         | 1       | 15        | Contact integration |
| v0.23   | ~1200        | 1       | 20        | Harmonic resolution |
| v0.24   | ~1500        | 4       | 25        | Modular architecture |
| **v1.0** | **~2800**   | **5**   | **50+**   | **Full operational** |
| **v1.1** | **~2800**   | **5**   | **48**    | **Refined operational** |

---

## üöÄ **Future Roadmap**

### **v1.2** - Enhanced Documentation & Automation
- Schedule summary export automation
- Enhanced user documentation
- Advanced troubleshooting guides

### **v1.3** - Data Integration
- Breeze API integration for automated contact sync
- Enhanced calendar synchronization
- Historical reporting features

### **v2.0** - Major Architecture Evolution
- Web-based interface option
- Advanced notification channels (SMS, email)
- Multi-church deployment support
- Enhanced security and permissions model

---

*This changelog reflects the evolution from experimental prototype (v0.x) to production-ready system (v1.0+). The transition to semantic versioning at v1.0 marks the first truly operational release suitable for church production use.*
